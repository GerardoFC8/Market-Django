Index: mainCRUD/views.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>from django.shortcuts import render, redirect\r\nfrom .models import Usuario, Producto\r\nfrom .forms import UsuarioForm, ProductoForm\r\nfrom .forms import UserRegisterForm\r\nfrom django.contrib import messages\r\n\r\n# Create your views here.\r\n\r\ndef index(request):\r\n    prod = Producto.objects.all()\r\n    return render(request, \"mainCRUD/index.html\", {\"list_producto\": prod})\r\n\r\ndef usuario(request):\r\n    us = Usuario.objects.filter(usuario_estado = True)\r\n    context = {\"list_usuario\": us}\r\n    return render(request, \"mainCRUD/usuario.html\", context)\r\n\r\ndef producto(request):\r\n    prod = Producto.objects.all()\r\n    context = {\"list_producto\": prod}\r\n    return render(request, \"mainCRUD/producto.html\", context)\r\n\r\ndef agregar_usu(request):\r\n    if request.method == 'POST':\r\n        form = UsuarioForm(request.POST)\r\n        if form.is_valid():\r\n            form.save()\r\n            return redirect('usuario')\r\n    else:\r\n        form = UsuarioForm()\r\n        \r\n    context = {'form' : form}\r\n    return render(request, 'mainCRUD/agregar_usu.html', context)\r\n\r\ndef agregar_prod(request):\r\n    if request.method == 'POST':\r\n        form = ProductoForm(request.POST)\r\n        if form.is_valid():\r\n            form.save()\r\n            return redirect('producto')\r\n    else:\r\n        form = ProductoForm()\r\n        \r\n    context = {'form' : form}\r\n    return render(request, 'mainCRUD/agregar_prod.html', context)\r\n\r\ndef editar_usuario(request, id_usuario):\r\n    usuario = Usuario.objects.get(id = id_usuario)\r\n    if request.method == 'POST':\r\n        form = UsuarioForm(request.POST, instance = usuario)\r\n        if form.is_valid():\r\n            form.save()\r\n            return redirect('usuario')\r\n    else:\r\n        form = UsuarioForm(instance = usuario)\r\n\r\n    context = {'form' : form}\r\n    return render(request, 'mainCRUD/editar_usu.html', context)\r\n\r\ndef eliminar_usuario(request, id_usuario):\r\n    usuario = Usuario.objects.get(id = id_usuario)\r\n    if request.method == 'POST':\r\n        form = UsuarioForm(request.POST, instance = usuario)\r\n        if form.is_valid():\r\n            form.save()\r\n            return redirect('usuario')\r\n    else:\r\n        form = UsuarioForm(instance = usuario)\r\n\r\n    context = {'form' : form}\r\n    return render(request, 'mainCRUD/agregar_usu.html', context)\r\n\r\n\r\ndef editar_producto(request, id_producto):\r\n    producto = Producto.objects.get(id = id_producto)\r\n    if request.method == 'POST':\r\n        form = ProductoForm(request.POST, instance = producto)\r\n        if form.is_valid():\r\n            form.save()\r\n            return redirect('producto')\r\n    else:\r\n        form = ProductoForm(instance = producto)\r\n\r\n    context = {'form' : form}\r\n    return render(request, 'mainCRUD/agregar_prod.html', context)\r\n\r\ndef eliminar_producto(request, id_producto):\r\n    producto = Producto.objects.get(id = id_producto)\r\n    producto.delete()\r\n    return redirect('producto')\r\n\r\ndef register(request):\r\n    if request.method == 'POST':\r\n        form = UserRegisterForm(request.POST)\r\n        if form.is_valid():\r\n            username = form.cleaned_data['username']\r\n            messages.success(request, f'El usuario {username} fue creado correctamente.')\r\n            form.save()\r\n    else:\r\n        form = UserRegisterForm()\r\n\r\n    context = {'form' : form}\r\n    return render(request, 'mainCRUD/admin/register.html', context)\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/mainCRUD/views.py b/mainCRUD/views.py
--- a/mainCRUD/views.py	(revision 4ebc71349063129644c68278fa2aa27bb3b6a36f)
+++ b/mainCRUD/views.py	(date 1628266134770)
@@ -3,6 +3,7 @@
 from .forms import UsuarioForm, ProductoForm
 from .forms import UserRegisterForm
 from django.contrib import messages
+from django.contrib.auth.decorators import login_required, permission_required
 
 # Create your views here.
 
@@ -20,6 +21,8 @@
     context = {"list_producto": prod}
     return render(request, "mainCRUD/producto.html", context)
 
+@login_required()
+@permission_required('mainCRUD.add_usuario')
 def agregar_usu(request):
     if request.method == 'POST':
         form = UsuarioForm(request.POST)
@@ -28,10 +31,12 @@
             return redirect('usuario')
     else:
         form = UsuarioForm()
-        
+
     context = {'form' : form}
     return render(request, 'mainCRUD/agregar_usu.html', context)
 
+@login_required()
+@permission_required('mainCRUD.add_producto')
 def agregar_prod(request):
     if request.method == 'POST':
         form = ProductoForm(request.POST)
@@ -44,6 +49,8 @@
     context = {'form' : form}
     return render(request, 'mainCRUD/agregar_prod.html', context)
 
+@login_required()
+@permission_required('mainCRUD.change_usuario')
 def editar_usuario(request, id_usuario):
     usuario = Usuario.objects.get(id = id_usuario)
     if request.method == 'POST':
@@ -57,6 +64,8 @@
     context = {'form' : form}
     return render(request, 'mainCRUD/editar_usu.html', context)
 
+@login_required()
+@permission_required('mainCRUD.delete_usuario')
 def eliminar_usuario(request, id_usuario):
     usuario = Usuario.objects.get(id = id_usuario)
     if request.method == 'POST':
@@ -70,7 +79,8 @@
     context = {'form' : form}
     return render(request, 'mainCRUD/agregar_usu.html', context)
 
-
+@login_required()
+@permission_required('mainCRUD.change_producto')
 def editar_producto(request, id_producto):
     producto = Producto.objects.get(id = id_producto)
     if request.method == 'POST':
@@ -84,6 +94,7 @@
     context = {'form' : form}
     return render(request, 'mainCRUD/agregar_prod.html', context)
 
+@permission_required('mainCRUD.delete_producto')
 def eliminar_producto(request, id_producto):
     producto = Producto.objects.get(id = id_producto)
     producto.delete()
Index: mainCRUD/urls.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>from django.urls import path\r\nfrom . import views\r\nfrom django.contrib.auth.views import LoginView, LogoutView\r\n\r\nurlpatterns = [\r\n    path(\"\", views.index, name=\"index\"),\r\n    path(\"home/\", views.index, name=\"home\"),\r\n    path(\"usuario/\", views.usuario, name=\"usuario\"),\r\n    path(\"producto/\", views.producto, name=\"producto\"),\r\n    path(\"agregar_usuario/\", views.agregar_usu, name=\"agregar\"),\r\n    path(\"agregar_producto/\", views.agregar_prod, name=\"agregar\"),\r\n    path(\"editar_usuario/<int:id_usuario>/\", views.editar_usuario, name=\"editar_usuario\"),\r\n    path(\"eliminar_usuario/<int:id_usuario>/\", views.eliminar_usuario, name=\"eliminar_usuario\"),\r\n    path(\"editar_producto/<int:id_producto>/\", views.editar_producto, name=\"editar_producto\"),\r\n    path(\"eliminar_producto/<int:id_producto>/\", views.eliminar_producto, name=\"eliminar_producto\"),\r\n    path(\"register/\", views.register, name='register'),\r\n    path(\"login/\", LoginView.as_view(template_name='mainCRUD/admin/login.html'), name='login'),\r\n    path(\"logout/\", LoginView.as_view(template_name='mainCRUD/admin/logout.html'), name='logout'),\r\n]\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/mainCRUD/urls.py b/mainCRUD/urls.py
--- a/mainCRUD/urls.py	(revision 4ebc71349063129644c68278fa2aa27bb3b6a36f)
+++ b/mainCRUD/urls.py	(date 1628266134699)
@@ -1,4 +1,4 @@
-from django.urls import path
+from django.urls import path, include
 from . import views
 from django.contrib.auth.views import LoginView, LogoutView
 
@@ -15,5 +15,6 @@
     path("eliminar_producto/<int:id_producto>/", views.eliminar_producto, name="eliminar_producto"),
     path("register/", views.register, name='register'),
     path("login/", LoginView.as_view(template_name='mainCRUD/admin/login.html'), name='login'),
-    path("logout/", LoginView.as_view(template_name='mainCRUD/admin/logout.html'), name='logout'),
+    path("logout/", LogoutView.as_view(template_name='mainCRUD/admin/logout.html'), name='logout'),
+    path('accounts/', include('django.contrib.auth.urls')),
 ]
Index: market/urls.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>\"\"\"market URL Configuration\r\n\r\nThe `urlpatterns` list routes URLs to views. For more information please see:\r\n    https://docs.djangoproject.com/en/3.2/topics/http/urls/\r\nExamples:\r\nFunction views\r\n    1. Add an import:  from my_app import views\r\n    2. Add a URL to urlpatterns:  path('', views.home, name='home')\r\nClass-based views\r\n    1. Add an import:  from other_app.views import Home\r\n    2. Add a URL to urlpatterns:  path('', Home.as_view(), name='home')\r\nIncluding another URLconf\r\n    1. Import the include() function: from django.urls import include, path\r\n    2. Add a URL to urlpatterns:  path('blog/', include('blog.urls'))\r\n\"\"\"\r\nfrom django.contrib import admin\r\nfrom django.urls import path, include\r\nfrom django.conf import settings\r\nfrom django.conf.urls.static import static\r\n\r\nurlpatterns = [\r\n    path('admin/', admin.site.urls),\r\n    path('', include('mainCRUD.urls')),\r\n] + static(settings.STATIC_URL, document_root=settings.STATIC_ROOT)\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/market/urls.py b/market/urls.py
--- a/market/urls.py	(revision 4ebc71349063129644c68278fa2aa27bb3b6a36f)
+++ b/market/urls.py	(date 1628266135050)
@@ -18,7 +18,9 @@
 from django.conf import settings
 from django.conf.urls.static import static
 
+
 urlpatterns = [
     path('admin/', admin.site.urls),
     path('', include('mainCRUD.urls')),
+    path('oauth/', include('social_django.urls', namespace='social'))
 ] + static(settings.STATIC_URL, document_root=settings.STATIC_ROOT)
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"ChangeListManager\">\r\n    <list default=\"true\" id=\"81ee3579-0264-4199-9dbe-aaac5a4f947a\" name=\"Changes\" comment=\"estilos\">\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/workspace.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/mainCRUD/static/css/base.css\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/mainCRUD/static/css/base.css\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/mainCRUD/static/css/index.css\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/mainCRUD/static/css/index.css\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/mainCRUD/templates/mainCRUD/base.html\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/mainCRUD/templates/mainCRUD/base.html\" afterDir=\"false\" />\r\n    </list>\r\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\r\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\r\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\r\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\r\n  </component>\r\n  <component name=\"DjangoConsoleOptions\" custom-start-script=\"import sys; print('Python %s on %s' % (sys.version, sys.platform))&#10;import django; print('Django %s' % django.get_version())&#10;sys.path.extend([WORKING_DIR_AND_PYTHON_PATHS])&#10;if 'setup' in dir(django): django.setup()&#10;import django_manage_shell; django_manage_shell.run(PROJECT_ROOT)\">\r\n    <option name=\"myCustomStartScript\" value=\"import sys; print('Python %s on %s' % (sys.version, sys.platform))&#10;import django; print('Django %s' % django.get_version())&#10;sys.path.extend([WORKING_DIR_AND_PYTHON_PATHS])&#10;if 'setup' in dir(django): django.setup()&#10;import django_manage_shell; django_manage_shell.run(PROJECT_ROOT)\" />\r\n  </component>\r\n  <component name=\"FileTemplateManagerImpl\">\r\n    <option name=\"RECENT_TEMPLATES\">\r\n      <list>\r\n        <option value=\"CSS File\" />\r\n      </list>\r\n    </option>\r\n  </component>\r\n  <component name=\"Git.Settings\">\r\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$/..\" />\r\n  </component>\r\n  <component name=\"GitSEFilterConfiguration\">\r\n    <file-type-list>\r\n      <filtered-out-file-type name=\"LOCAL_BRANCH\" />\r\n      <filtered-out-file-type name=\"REMOTE_BRANCH\" />\r\n      <filtered-out-file-type name=\"TAG\" />\r\n      <filtered-out-file-type name=\"COMMIT_BY_MESSAGE\" />\r\n    </file-type-list>\r\n  </component>\r\n  <component name=\"ProjectId\" id=\"1wAzATrGCNOzkcoPYKxA3a4UCn8\" />\r\n  <component name=\"ProjectLevelVcsManager\" settingsEditedManually=\"true\">\r\n    <ConfirmationsSetting value=\"2\" id=\"Add\" />\r\n  </component>\r\n  <component name=\"ProjectViewState\">\r\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\r\n    <option name=\"showLibraryContents\" value=\"true\" />\r\n  </component>\r\n  <component name=\"PropertiesComponent\">\r\n    <property name=\"ASKED_ADD_EXTERNAL_FILES\" value=\"true\" />\r\n    <property name=\"RunOnceActivity.OpenProjectViewOnStart\" value=\"true\" />\r\n    <property name=\"RunOnceActivity.ShowReadmeOnStart\" value=\"true\" />\r\n    <property name=\"WebServerToolWindowFactoryState\" value=\"false\" />\r\n    <property name=\"list.type.of.created.stylesheet\" value=\"CSS\" />\r\n    <property name=\"settings.editor.selected.configurable\" value=\"preferences.updates\" />\r\n  </component>\r\n  <component name=\"RunManager\">\r\n    <configuration name=\"market\" type=\"Python.DjangoServer\" factoryName=\"Django server\">\r\n      <module name=\"market\" />\r\n      <option name=\"INTERPRETER_OPTIONS\" value=\"\" />\r\n      <option name=\"PARENT_ENVS\" value=\"true\" />\r\n      <envs>\r\n        <env name=\"PYTHONUNBUFFERED\" value=\"1\" />\r\n      </envs>\r\n      <option name=\"SDK_HOME\" value=\"\" />\r\n      <option name=\"WORKING_DIRECTORY\" value=\"\" />\r\n      <option name=\"IS_MODULE_SDK\" value=\"false\" />\r\n      <option name=\"ADD_CONTENT_ROOTS\" value=\"true\" />\r\n      <option name=\"ADD_SOURCE_ROOTS\" value=\"true\" />\r\n      <option name=\"launchJavascriptDebuger\" value=\"false\" />\r\n      <option name=\"port\" value=\"8000\" />\r\n      <option name=\"host\" value=\"\" />\r\n      <option name=\"additionalOptions\" value=\"\" />\r\n      <option name=\"browserUrl\" value=\"\" />\r\n      <option name=\"runTestServer\" value=\"false\" />\r\n      <option name=\"runNoReload\" value=\"false\" />\r\n      <option name=\"useCustomRunCommand\" value=\"false\" />\r\n      <option name=\"customRunCommand\" value=\"\" />\r\n      <method v=\"2\" />\r\n    </configuration>\r\n  </component>\r\n  <component name=\"SpellCheckerSettings\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" DefaultDictionary=\"application-level\" UseSingleDictionary=\"true\" transferred=\"true\" />\r\n  <component name=\"TaskManager\">\r\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\r\n      <changelist id=\"81ee3579-0264-4199-9dbe-aaac5a4f947a\" name=\"Changes\" comment=\"\" />\r\n      <created>1627916041994</created>\r\n      <option name=\"number\" value=\"Default\" />\r\n      <option name=\"presentableId\" value=\"Default\" />\r\n      <updated>1627916041994</updated>\r\n      <workItem from=\"1627916043679\" duration=\"1831000\" />\r\n      <workItem from=\"1627918004188\" duration=\"97000\" />\r\n      <workItem from=\"1628166278116\" duration=\"131000\" />\r\n      <workItem from=\"1628166423130\" duration=\"11681000\" />\r\n    </task>\r\n    <task id=\"LOCAL-00001\" summary=\"sidebar / static files added\">\r\n      <created>1627917723745</created>\r\n      <option name=\"number\" value=\"00001\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00001\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1627917723745</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00002\" summary=\"static css added\">\r\n      <created>1628166559286</created>\r\n      <option name=\"number\" value=\"00002\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00002\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1628166559286</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00003\" summary=\"estilos pagina principal\">\r\n      <created>1628180525843</created>\r\n      <option name=\"number\" value=\"00003\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00003\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1628180525843</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00004\" summary=\"estilos\">\r\n      <created>1628184234217</created>\r\n      <option name=\"number\" value=\"00004\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00004\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1628184234217</updated>\r\n    </task>\r\n    <option name=\"localTasksCounter\" value=\"5\" />\r\n    <servers />\r\n  </component>\r\n  <component name=\"TypeScriptGeneratedFilesManager\">\r\n    <option name=\"version\" value=\"3\" />\r\n  </component>\r\n  <component name=\"Vcs.Log.Tabs.Properties\">\r\n    <option name=\"TAB_STATES\">\r\n      <map>\r\n        <entry key=\"MAIN\">\r\n          <value>\r\n            <State />\r\n          </value>\r\n        </entry>\r\n      </map>\r\n    </option>\r\n    <option name=\"oldMeFiltersMigrated\" value=\"true\" />\r\n  </component>\r\n  <component name=\"VcsManagerConfiguration\">\r\n    <option name=\"ADD_EXTERNAL_FILES_SILENTLY\" value=\"true\" />\r\n    <MESSAGE value=\"sidebar / static files added\" />\r\n    <MESSAGE value=\"static css added\" />\r\n    <MESSAGE value=\"estilos pagina principal\" />\r\n    <MESSAGE value=\"estilos\" />\r\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"estilos\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/workspace.xml b/.idea/workspace.xml
--- a/.idea/workspace.xml	(revision 4ebc71349063129644c68278fa2aa27bb3b6a36f)
+++ b/.idea/workspace.xml	(date 1628266301272)
@@ -2,10 +2,14 @@
 <project version="4">
   <component name="ChangeListManager">
     <list default="true" id="81ee3579-0264-4199-9dbe-aaac5a4f947a" name="Changes" comment="estilos">
-      <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/mainCRUD/static/css/base.css" beforeDir="false" afterPath="$PROJECT_DIR$/mainCRUD/static/css/base.css" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/mainCRUD/static/css/index.css" beforeDir="false" afterPath="$PROJECT_DIR$/mainCRUD/static/css/index.css" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/mainCRUD/templates/mainCRUD/base.html" beforeDir="false" afterPath="$PROJECT_DIR$/mainCRUD/templates/mainCRUD/base.html" afterDir="false" />
+      <change afterPath="$PROJECT_DIR$/mainCRUD/templates/registration/login.html" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/mainCRUD/models.py" beforeDir="false" afterPath="$PROJECT_DIR$/mainCRUD/models.py" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/mainCRUD/templates/mainCRUD/admin/register.html" beforeDir="false" afterPath="$PROJECT_DIR$/mainCRUD/templates/mainCRUD/admin/register.html" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/mainCRUD/templates/mainCRUD/usuario.html" beforeDir="false" afterPath="$PROJECT_DIR$/mainCRUD/templates/mainCRUD/usuario.html" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/mainCRUD/urls.py" beforeDir="false" afterPath="$PROJECT_DIR$/mainCRUD/urls.py" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/mainCRUD/views.py" beforeDir="false" afterPath="$PROJECT_DIR$/mainCRUD/views.py" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/market/settings.py" beforeDir="false" afterPath="$PROJECT_DIR$/market/settings.py" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/market/urls.py" beforeDir="false" afterPath="$PROJECT_DIR$/market/urls.py" afterDir="false" />
     </list>
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
@@ -86,6 +90,7 @@
       <workItem from="1627918004188" duration="97000" />
       <workItem from="1628166278116" duration="131000" />
       <workItem from="1628166423130" duration="11681000" />
+      <workItem from="1628265944736" duration="354000" />
     </task>
     <task id="LOCAL-00001" summary="sidebar / static files added">
       <created>1627917723745</created>
Index: mainCRUD/templates/registration/login.html
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/mainCRUD/templates/registration/login.html b/mainCRUD/templates/registration/login.html
new file mode 100644
--- /dev/null	(date 1628266134659)
+++ b/mainCRUD/templates/registration/login.html	(date 1628266134659)
@@ -0,0 +1,16 @@
+<!DOCTYPE html>
+<html lang="en">
+<head>
+    <meta charset="UTF-8">
+    <meta http-equiv="X-UA-Compatible" content="IE=edge">
+    <meta name="viewport" content="width=device-width, initial-scale=1.0">
+    <title>Login</title>
+</head>
+<body>
+    <h2>Autenticacion</h2>
+    <form action="" method='post'></form>
+    {% csrf_token %}
+    {{ form }}
+    <input type="submit" value="Login">
+</body>
+</html>
\ No newline at end of file
Index: market/settings.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>\"\"\"\r\nDjango settings for market project.\r\n\r\nGenerated by 'django-admin startproject' using Django 3.2.5.\r\n\r\nFor more information on this file, see\r\nhttps://docs.djangoproject.com/en/3.2/topics/settings/\r\n\r\nFor the full list of settings and their values, see\r\nhttps://docs.djangoproject.com/en/3.2/ref/settings/\r\n\"\"\"\r\nimport os\r\nfrom pathlib import Path\r\n\r\n# Build paths inside the project like this: BASE_DIR / 'subdir'.\r\nBASE_DIR = Path(__file__).resolve().parent.parent\r\n\r\n\r\n# Quick-start development settings - unsuitable for production\r\n# See https://docs.djangoproject.com/en/3.2/howto/deployment/checklist/\r\n\r\n# SECURITY WARNING: keep the secret key used in production secret!\r\nSECRET_KEY = 'django-insecure-&i)puph-^q560jyka2kh*$4e$xt&oi54wo*vzeodt1yb@l)xix'\r\n\r\n# SECURITY WARNING: don't run with debug turned on in production!\r\nDEBUG = True\r\n\r\nALLOWED_HOSTS = []\r\n\r\n\r\n# Application definition\r\n\r\nINSTALLED_APPS = [\r\n    'django.contrib.admin',\r\n    'django.contrib.auth',\r\n    'django.contrib.contenttypes',\r\n    'django.contrib.sessions',\r\n    'django.contrib.messages',\r\n    'django.contrib.staticfiles',\r\n    'mainCRUD.apps.MaincrudConfig',\r\n]\r\n\r\nMIDDLEWARE = [\r\n    'django.middleware.security.SecurityMiddleware',\r\n    'django.contrib.sessions.middleware.SessionMiddleware',\r\n    'django.middleware.common.CommonMiddleware',\r\n    'django.middleware.csrf.CsrfViewMiddleware',\r\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\r\n    'django.contrib.messages.middleware.MessageMiddleware',\r\n    'django.middleware.clickjacking.XFrameOptionsMiddleware',\r\n]\r\n\r\nROOT_URLCONF = 'market.urls'\r\n\r\nTEMPLATES = [\r\n    {\r\n        'BACKEND': 'django.template.backends.django.DjangoTemplates',\r\n        'DIRS': [],\r\n        'APP_DIRS': True,\r\n        'OPTIONS': {\r\n            'context_processors': [\r\n                'django.template.context_processors.debug',\r\n                'django.template.context_processors.request',\r\n                'django.contrib.auth.context_processors.auth',\r\n                'django.contrib.messages.context_processors.messages',\r\n            ],\r\n        },\r\n    },\r\n]\r\n\r\nWSGI_APPLICATION = 'market.wsgi.application'\r\n\r\n\r\n# Database\r\n# https://docs.djangoproject.com/en/3.2/ref/settings/#databases\r\n\r\nDATABASES = {\r\n    'default': {\r\n        'ENGINE': 'django.db.backends.sqlite3',\r\n        'NAME': BASE_DIR / 'db.sqlite3',\r\n    }\r\n}\r\n\r\n\r\n# Password validation\r\n# https://docs.djangoproject.com/en/3.2/ref/settings/#auth-password-validators\r\n\r\nAUTH_PASSWORD_VALIDATORS = [\r\n    {\r\n        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',\r\n    },\r\n    {\r\n        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',\r\n    },\r\n    {\r\n        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',\r\n    },\r\n    {\r\n        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',\r\n    },\r\n]\r\n\r\n\r\n# Internationalization\r\n# https://docs.djangoproject.com/en/3.2/topics/i18n/\r\n\r\nLANGUAGE_CODE = 'en-us'\r\n\r\nTIME_ZONE = 'UTC'\r\n\r\nUSE_I18N = True\r\n\r\nUSE_L10N = True\r\n\r\nUSE_TZ = True\r\n\r\n\r\n# Static files (CSS, JavaScript, Images)\r\n# https://docs.djangoproject.com/en/3.2/howto/static-files/\r\n\r\nSTATIC_URL = '/static/'\r\n\r\nMEDIA_URL = '/image/'\r\n\r\nSTATIC_DIRS = [\r\n    os.path.join(BASE_DIR, 'static'),\r\n]\r\n\r\n# Default primary key field type\r\n# https://docs.djangoproject.com/en/3.2/ref/settings/#default-auto-field\r\n\r\nDEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'\r\n\r\nLOGIN_REDIRECT_URL = 'home'
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/market/settings.py b/market/settings.py
--- a/market/settings.py	(revision 4ebc71349063129644c68278fa2aa27bb3b6a36f)
+++ b/market/settings.py	(date 1628266134979)
@@ -27,6 +27,9 @@
 
 ALLOWED_HOSTS = []
 
+SOCIAL_AUTH_FACEBOOK_KEY = '3114165578806569'
+SOCIAL_AUTH_FACEBOOK_SECRET = 'ac33c2de50a687e8a7f16c899a497fd7'
+
 
 # Application definition
 
@@ -38,6 +41,7 @@
     'django.contrib.messages',
     'django.contrib.staticfiles',
     'mainCRUD.apps.MaincrudConfig',
+    'social_django',
 ]
 
 MIDDLEWARE = [
@@ -48,6 +52,7 @@
     'django.contrib.auth.middleware.AuthenticationMiddleware',
     'django.contrib.messages.middleware.MessageMiddleware',
     'django.middleware.clickjacking.XFrameOptionsMiddleware',
+    'social_django.middleware.SocialAuthExceptionMiddleware',
 ]
 
 ROOT_URLCONF = 'market.urls'
@@ -63,6 +68,8 @@
                 'django.template.context_processors.request',
                 'django.contrib.auth.context_processors.auth',
                 'django.contrib.messages.context_processors.messages',
+                'social_django.context_processors.backends',
+                'social_django.context_processors.login_redirect',
             ],
         },
     },
@@ -131,4 +138,10 @@
 
 DEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'
 
-LOGIN_REDIRECT_URL = 'home'
\ No newline at end of file
+LOGIN_REDIRECT_URL = 'home'
+LOGOUT_REDIRECT_URL = '/'
+
+AUTHENTICATION_BACKENDS = (
+    'social_core.backends.facebook.FacebookOAuth2',
+    'django.contrib.auth.backends.ModelBackend',
+)
Index: mainCRUD/templates/mainCRUD/usuario.html
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>{% extends \"mainCRUD/base.html\" %}\r\n{% block titulo %} Usuario {% endblock %}\r\n\r\n{% block cuerpo %}    \r\n\r\n    <table border=\"1\">\r\n        <thead>\r\n            <tr>\r\n                <th>Nombre</th>\r\n                <th>Correo</th>\r\n                <th>Opcion</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            {% for user in list_usuario %}\r\n            <tr>\r\n                <td>{{ user.usuario_nombre }}</td>\r\n                <td>{{ user.usuario_correo }}</td>\r\n                <td><a href=\"{% url 'editar_usuario' user.id %}\">EDITAR</a> |  <a href=\"{% url 'editar_usuario' user.id %}\">ELIMINAR</a></td>\r\n            </tr>\r\n            {% endfor %}\r\n        </tbody>\r\n    </table>\r\n    \r\n    <button><a href='/agregar_usuario'>Agregar Usuario</a></button>\r\n{% endblock %}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/mainCRUD/templates/mainCRUD/usuario.html b/mainCRUD/templates/mainCRUD/usuario.html
--- a/mainCRUD/templates/mainCRUD/usuario.html	(revision 4ebc71349063129644c68278fa2aa27bb3b6a36f)
+++ b/mainCRUD/templates/mainCRUD/usuario.html	(date 1628266134599)
@@ -9,6 +9,7 @@
                 <th>Nombre</th>
                 <th>Correo</th>
                 <th>Opcion</th>
+                <th>asdas</th>
             </tr>
         </thead>
         <tbody>
@@ -17,6 +18,7 @@
                 <td>{{ user.usuario_nombre }}</td>
                 <td>{{ user.usuario_correo }}</td>
                 <td><a href="{% url 'editar_usuario' user.id %}">EDITAR</a> |  <a href="{% url 'editar_usuario' user.id %}">ELIMINAR</a></td>
+                <td>{{ user.usuario_administrador }}</td>
             </tr>
             {% endfor %}
         </tbody>
Index: mainCRUD/templates/mainCRUD/admin/register.html
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>{% extends 'mainCRUD/base.html'%}\r\n<title>{% block titulo %}Registrar{% endblock %}</title>\r\n{% block cuerpo %}\r\n\r\n<form method=\"POST\">\r\n    {% csrf_token %}\r\n    {{ form.as_p }}\r\n\r\n    <button type=\"submit\">Registrar</button>\r\n    {% if messages %}\r\n        {% for message in messages %}\r\n            {{ message }}\r\n        {% endfor %}\r\n    {% endif %}\r\n</form>\r\n\r\n{% endblock cuerpo %}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/mainCRUD/templates/mainCRUD/admin/register.html b/mainCRUD/templates/mainCRUD/admin/register.html
--- a/mainCRUD/templates/mainCRUD/admin/register.html	(revision 4ebc71349063129644c68278fa2aa27bb3b6a36f)
+++ b/mainCRUD/templates/mainCRUD/admin/register.html	(date 1628266134559)
@@ -13,5 +13,5 @@
         {% endfor %}
     {% endif %}
 </form>
-
+<a href="{% url 'social:begin' 'facebook' %}">Login con facebook</a>
 {% endblock cuerpo %}
\ No newline at end of file
Index: mainCRUD/models.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>from django.db import models\r\n\r\n# Create your models here.\r\nclass Usuario(models.Model):\r\n    usuario_nombre = models.CharField(max_length=250)\r\n    usuario_estado = models.BooleanField(default=True)\r\n    usuario_correo = models.CharField(max_length=250)\r\n    usuario_clave = models.CharField(max_length=250)\r\n    usuario_fecha = models.DateField()\r\n\r\n    def __str__(self):\r\n        return self.usuario_nombre\r\n# Usuario(usuario_nombre=\"Jamir\", usuario_estado=\"1\", usuario_correo=\"correo@gmail.com\", usuario_clave=\"123\", usuario_fecha=\"2021-08-01\")\r\n\r\nclass Producto(models.Model):\r\n    prod_nombre = models.CharField(max_length=500)\r\n    prod_categoria = models.CharField(max_length=250)\r\n    prod_precio = models.FloatField(default=0.0)\r\n\r\n    def __str__(self):\r\n        return self.prod_nombre\r\n    # Producto(prod_nombre=\"Platano\", prod_categoria=\"viveres\", prod_precio=\"3.60\")\r\n\r\n    # SHELL a \r\n# from mainCRUD.models import Usuario, Producto\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/mainCRUD/models.py b/mainCRUD/models.py
--- a/mainCRUD/models.py	(revision 4ebc71349063129644c68278fa2aa27bb3b6a36f)
+++ b/mainCRUD/models.py	(date 1628266134509)
@@ -7,6 +7,7 @@
     usuario_correo = models.CharField(max_length=250)
     usuario_clave = models.CharField(max_length=250)
     usuario_fecha = models.DateField()
+    #usuario_administrador = models.BooleanField(default=False)
 
     def __str__(self):
         return self.usuario_nombre
